<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
    <script src="https://unpkg.com/esri-leaflet@2.5.0/dist/esri-leaflet.js"
    integrity="sha512-ucw7Grpc+iEQZa711gcjgMBnmd9qju1CICsRaryvX7HJklK0pGl/prxKvtHwpgm5ZHdvAil7YPxI1oWPOWK3UQ=="
    crossorigin=""></script>

    <script src="Arquivosgeojson/malha.geojson"></script>
    <script src="Arquivosgeojson/ciclo2.geojson"></script>
    <script src="Arquivosgeojson/ciclo3.geojson"></script>
    <script src="Arquivosgeojson/zonas.geojson"></script>

    <script src="Arquivosgeojson/EstacoesBikePE.geojson"></script>
    <script src="Arquivosgeojson/PrevRedeCicloMetropolitana.geojson"></script>
    <script src="Arquivosgeojson/PrevRedeCicloComplementar.geojson"></script>
    
    <title>Hacker Cidaddão - Equipe 9</title>
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <style>
        #mapid { width:100%;height: 550px; border: solid 1px black;}
        .info {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255,255,255,0.8);
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            border-radius: 5px;
        }
        .info h4 {
            margin: 0 0 5px;
            color: #777;
        }
        div.scrollmenu {
        background-color: #333;
        overflow: auto;
        white-space: nowrap;
        border:1px solid #c0c0c0;
        display:block;
        width:100%;
        }

        div.scrollmenu a {
        display: inline-block;
        color: white;
        text-align: center;
        padding: 15px;
        text-decoration: none;
        margin-left:5%;
        margin-right: 5%;
        }

        div.scrollmenu a:hover {
        background-color: #777;
        }
        .legend {
            line-height: 18px;
            color: #555;
        }
        .legend i {
            width: 18px;
            height: 18px;
            float: left;
            margin-right: 8px;
            opacity: 0.7;
        }
    </style>
    
  </head>
  <body>
    <div class="scrollmenu">
        <a href="home.html" id="tile1">Home</a>
        <a href="pag2.html" id="tile2">Mapa2</a>
        <a href="pag3.html">Mapa3</a>
        <a href="pag4-1.html">Mapa4</a>
        <a href="#">Mapa5</a>
        <a href="#tools">Tools</a>  
    </div>
    <h2>Zonas de tráfego com maiores deslocamentos, bicicleta, motivo trabalho (Pesquisa OD 2018) </h2>
    
    <table border="0" width="100%" padding-left="10" >
        <tr>

        <td width="70%" valign="top">
            <div id="mapid"></div>

        </td>

        
        <td width="30%" valign="top">
            <div style="margin-left: 20px; ">
                <h3>Descrição do Mapa</h3>
                <p> Cada cor representa uma escala de quantidade de tráfego por zona, sendo as mais escuras onde há mais deslocamento. <br/> Ao passar por uma zona, será mostrado uma quantidade total de viagens feitas para outras zonas por motivo de trabalho. (Pesquisa OD de 2018). <br/> Também é possível verificar qual rota cicloviária contempla essas zonas, se houver, acessando o menu de camadas do mapa.</p>
            </div>
            
        </td>

        </tr>
    </table>
      
    
    <!--<p>Resize the browser window to see the effect.</p>-->
    
    
    <script>

        var ODBike = new Array(
        [52,52,4],[52,58,1],[52,141,1],[53,53,357.020659],[53,249,177.9150223],
        [53,52,164.6489362],[53,141,18.09627479],[53,56,8.435897436],[53,59,8.435897436],
        [53,142,8.435897436],[53,54,2.41509434],[53,126,2.41509434],[53,153,2.41509434],
        [54,54,160.3751842],[54,55,22.51831502],[54,53,14.78021978],[54,124,7.738095238],
        [54,126,7.738095238],[54,58,6.965517241],[54,63,6.965517241],[55,124,15.72043011],
        [55,55,7.860215054],[55,58,6.1875],[55,104,6.1875],[55,249,6.1875],[55,52,5.795918367],
        [56,79,17.71875],[56,249,17.71875],[56,52,14.26865672],[56,55,14.26865672],
        [56,57,11.55714286],[57,92,5.770833333],[58,59,40.91551957],[58,54,24.31279418],
        [58,124,9.192982456],[58,87,8.466666667],[58,125,5.926829268],[58,127,5.097014925],
        [58,56,4.143589744],[58,249,4.143589744],[58,55,1.818181818],[59,52,15.01087801],
        [59,54,7.463768116],[59,104,7.463768116],[59,58,6.775700935],[59,141,6.775700935],
        [60,54,26.48275862],[60,91,13.24137931],[61,65,8.963768116],[61,69,8.963768116],
        [61,87,8.963768116],[61,62,2.607142857],[62,65,2],[62,57,1],[63,65,1002.730066],
        [63,64,180.344086],[63,56,11.17152104],[63,63,11.17152104],[63,72,11.17152104],
        [63,93,11.17152104],[63,59,4.737864078],[63,142,4.737864078],[63,90,4.561797753],
        [64,85,21.16326531],[64,55,7.88],[64,64,7.88],[64,65,1.993710692],[65,65,375.8169299],
        [65,72,133.5983607],[66,93,28.28906634],[66,110,28.28906634],[66,56,26.13624701],
        [66,57,21.51990794],[66,59,16.4527027],[66,66,16.4527027],[66,69,16.4527027],
        [66,125,16.4527027],[66,79,11.83636364],[66,86,11.83636364],[66,206,11.83636364],
        [66,71,9.683544304],[66,76,9.683544304],[66,142,9.683544304],[66,67,7.631284916],
        [66,52,3.411764706],[67,73,159.8684211],[67,93,159.8684211],[67,68,50.06818182],
        [67,67,37.55113636],[67,71,29.51704545],[67,69,22.32473776],[67,77,12.51704545],
        [67,91,12.51704545],[67,92,12.51704545],[67,66,5.666666667],[67,127,5.666666667],
        [67,129,5.666666667],[68,68,276.354536],[68,77,203.6933333],[68,69,48.61878259],
        [68,71,35.95017794],[68,67,30.84871534],[68,65,17.97508897],[68,59,12.87362637],
        [68,92,12.87362637],[69,69,181.7463694],[69,87,26.13333333],[69,127,17.19178082],
        [69,52,12.25454545],[70,70,36.10447761],[70,59,26.13432836],[70,71,9.970149254],
        [70,65,3.01910828],[71,56,182.5423729],[71,71,34.69250377],[71,52,3.579807692],
        [71,73,2.432972523],[72,71,125.0483782],[72,72,50.01984127],[72,248,25.00869565],
        [72,69,16.25],[72,52,8.83127572],[74,72,89.44186047],[74,73,64.4804239],
        [74,77,42.91588785],[74,69,31.33769076],[74,74,9.096774194],[74,142,4.559006211],
        [76,68,219.9230769],[76,73,219.9230769],[76,93,219.9230769],[76,146,26.32412617],
        [76,92,20.80612245],[76,58,18.09803922],[76,86,18.09803922],[76,87,8.226086957],
        [77,76,32.32692308],[77,73,12.50920245],[77,52,7.863013699],[78,77,71.47826087],
        [79,69,240.3506585],[79,97,168.0793651],[79,59,14.45425868],[79,71,14.45425868],
        [79,87,14.45425868],[80,71,26.91266594],[80,69,11.56650246],[80,85,11.56650246],
        [80,76,3.779661017],[81,59,137.8245614],[81,54,16.75294889],[81,97,16.23364486],
        [82,154,133.7081081],[82,212,11.98591549],[84,154,101.6842105],[84,69,10.52810178],
        [84,142,7.041990669],[85,97,352.8181818],[86,68,204.0020947],[86,87,187.5919564],
        [86,86,17.00022633],[86,58,16.41013825],[86,89,16.41013825],[86,66,9.503875969],
        [87,117,147.4742268],[87,69,36.1225727],[87,85,34.85754332],[87,87,12.7911182],
        [87,59,9.490740741],[87,68,9.490740741],[87,76,9.490740741],[87,105,9.490740741],
        [87,107,9.490740741],[87,66,6.405797101],[87,79,6.405797101],[88,87,399.2734694],
        [88,90,287.0285714],[88,93,46.58177244],[88,67,28.06122449],[88,71,28.06122449],
        [88,95,28.06122449],[88,66,18.52054795],[88,143,18.52054795],[89,87,299.8421053],
        [89,74,25.21153846],[89,85,25.21153846],[89,91,25.21153846],[89,89,12.61764706],
        [90,93,93.03581604],[90,90,65.23687424],[90,66,41.15608466],[90,77,21.74562475],
        [90,105,13.35714286],[90,87,11.16666667],[90,57,7.846153846],[90,60,7.846153846],
        [90,65,7.846153846],[90,78,7.846153846],[90,127,7.846153846],[91,91,437.8484691],
        [91,93,294.7996886],[91,105,143.0487805],[91,154,143.0487805],[91,69,8.70212766],
        [91,55,7.222222222],[91,66,7.222222222],[91,126,7.222222222],[91,71,5.825],
        [91,74,5.825],[91,89,5.825],[92,93,233.768129],[92,69,169.1612495],
        [92,92,156.7699451],[92,59,144.3786408],[92,65,144.3786408],[92,67,24.7826087],
        [92,117,24.7826087],[92,91,24.26469455],[92,90,19.98104794],[92,142,18.27154387],
        [92,55,13.46998311],[92,62,12.39130435],[92,52,5.993150685],[92,106,5.993150685],
        [92,107,5.993150685],[92,147,5.958333333],[92,148,5.880239521],[93,93,801.6983065],
        [93,66,155.2626082],[93,117,33.12883436],[93,79,32.61492922],[93,91,22.08588957],
        [93,92,22.08588957],[93,69,21.828937],[93,59,19.56880685],[93,55,11.04294479],
        [93,102,11.04294479],[93,129,11.04294479],[93,146,11.04294479],[93,150,11.04294479],
        [93,54,8.525862069],[93,71,5.392996109],[94,117,338.0568324],[94,93,303.9875995],
        [94,97,273.3363967],[94,67,151.2500621],[94,70,130.5465116],[94,94,34.10366761],
        [94,91,24.48674699],[94,92,22.68393293],[94,57,16.92035398],[94,54,12.24337349],
        [94,69,12.24337349],[94,85,12.24337349],[94,90,12.24337349],[94,106,12.24337349],
        [94,113,12.24337349],[94,154,12.24337349],[94,116,10.44055944],[94,77,7.286764706],
        [94,105,7.286764706],[95,79,135.35],[95,87,120.35],[95,93,30],
        [95,95,10.3],[96,97,123.3448276],[96,87,19.53708791],[96,109,11.08653846],
        [96,249,11.08653846],[96,52,9.118644068],[97,97,6],[98,97,389.0302004],
        [98,69,14.0472103],[98,58,8.713178295],[98,99,8.713178295],[98,141,8.713178295],
        [99,97,255.4693878],[99,58,21.88888889],[99,90,21.88888889],[99,98,21.88888889],
        [99,99,21.11111111],[100,97,358.4235294],[100,85,16.79787234],[100,124,16.79787234],
        [100,117,7.553191489],[101,97,337.2432432],[101,85,180.2595527],[101,122,168.6216216],
        [101,99,6.571428571],[102,59,19.43933993],[102,97,16.53731343],[102,71,15.14893617],
        [102,147,10.128],[103,53,109.2045455],[103,103,41.76809067],[103,156,16.43243243],
        [103,59,15.52486188],[103,56,7.762430939],[103,54,3.901694915],[103,124,3.901694915],
        [104,103,163.7126263],[104,91,75.56706955],[104,126,67.47804878],[104,104,10.17566337],
        [104,55,8.089020772],[104,59,8.089020772],[104,92,8.089020772],[104,127,8.089020772],
        [104,141,8.089020772],[104,66,5.578947368],[104,93,5.578947368],[104,124,4.440559441],
        [104,94,4.173285199],[104,56,2.086642599],[104,106,2.086642599],[104,111,2.086642599],
        [105,58,90.24508844],[105,117,90.24508844],[105,156,84.11471733],[105,105,45.18851176],
        [105,59,39.15577551],[105,103,23.85214008],[105,100,11.92607004],[105,142,11.92607004],
        [105,97,11.59139785],[105,66,10.07964602],[105,90,10.07964602],[105,69,9.507936508],
        [105,77,5.795698925],[105,107,5.795698925],[105,127,5.795698925],[106,106,50.26872409],
        [106,93,18.76393367],[106,128,11.9],[106,104,9.80239521],[106,141,9.80239521],
        [106,52,8.961538462],[106,66,8.961538462],[107,56,94.921875],[107,59,94.921875],
        [107,65,94.921875],[107,91,94.921875],[107,97,94.921875],[107,142,34.97487437],
        [107,117,32.35471851],[107,107,31.64903369],[107,93,19.99074223],[107,69,17.43056869],
        [107,92,11.65829146],[107,103,11.65829146],[107,110,11.65829146],[107,111,11.65829146],
        [107,124,11.65829146],[107,127,11.65829146],[107,146,11.65829146],[107,106,9.257261411],
        [107,114,9.257261411],[107,54,9.038135593],[107,57,9.038135593],[107,58,9.038135593],
        [107,79,9.038135593],[107,104,9.038135593],[108,156,615.5852722],[108,117,369.7390472],
        [108,56,345.2884543],[108,108,223.5869149],[108,97,190.9821718],[108,53,166.5315789],
        [108,55,166.5315789],[108,107,166.5315789],[108,112,166.5315789],[108,141,52.98418972],
        [108,113,32.60474308],[108,54,24.45059289],[108,69,12.22529644],[108,103,12.22529644],
        [108,152,12.22529644],[108,91,9.509803922],[108,106,9.509803922],[108,57,8.154150198],
        [108,59,8.154150198],[108,109,8.154150198],[109,109,193.6779661],[109,117,193.6779661],
        [109,162,193.6779661],[109,56,20.06790123],[109,93,20.06790123],[109,156,20.06790123],
        [109,52,17.16798846],[109,98,9.857923497],[109,105,9.857923497],[109,111,9.255707763],
        [109,54,4.967741935],[110,117,486.2691775],[110,93,158.6148849],[110,110,24.07666065],
        [110,69,19.56953642],[110,59,13.04635762],[110,103,13.04635762],[110,104,13.04635762],
        [110,113,10.59167196],[110,55,6.523178808],[110,87,6.523178808],[110,90,6.523178808],
        [110,91,6.523178808],[110,105,6.523178808],[110,108,6.523178808],[110,109,6.523178808],
        [110,111,6.523178808],[110,156,6.523178808],[110,107,5.515151515],[110,126,4.068493151],
        [110,147,4.068493151],[111,117,21.78026906],[111,54,14.52017937],[111,98,13.46067416],
        [111,111,13.0399062],[111,52,7.260089686],[111,113,7.260089686],[111,114,7.260089686],
        [111,116,7.260089686],[111,124,7.260089686],[111,179,7.260089686],[111,59,3.125],
        [113,156,194.9815443],[113,154,88.29807692],[113,113,82.83968795],[113,116,59.36442038],
        [113,108,19.208698],[113,249,17.9755102],[113,114,16.25396825],[113,117,13.21686127],
        [113,91,12.25692695],[113,57,8.126984127],[113,142,8.126984127],[113,106,7.08839779],
        [113,126,7.08839779],[113,128,7.08839779],[113,109,6.128463476],[113,157,5.991836735],
        [114,117,8.560606061],[114,54,4.060606061],[115,156,7.838709677],[115,117,3.384615385],
        [115,113,2.444444444],[115,94,1],[116,117,865.9999862],[116,116,212.5650634],
        [116,156,207.6236959],[116,114,185.0924752],[116,113,66.15407725],[116,97,59.00578035],
        [116,58,8.075134168],[116,73,8.075134168],[116,103,8.075134168],[116,119,8.075134168],
        [116,124,8.075134168],[116,154,8.075134168],[116,52,6.508250825],[116,106,6.508250825],
        [116,108,6.508250825],[116,64,6.380952381],[116,55,5.52238806],[117,117,203.7757475],
        [117,53,4.139534884],[117,114,2.785714286],[119,117,368.2452028],[119,97,242.0144928],
        [119,119,121.0072464],[119,132,20.19230769],[119,114,12.24738676],[119,156,12.24738676],
        [119,69,10.44692737],[119,91,6.730769231],[119,59,5.223463687],[119,70,5.223463687],
        [119,93,5.223463687],[119,147,5.223463687],[120,117,10.27272727],[120,59,6],
        [124,52,29.87365288],[124,128,13.98611111],[124,126,13.5297619],[124,59,10.65868263],
        [124,55,6.764880952],[124,94,6.764880952],[124,124,6.764880952],[124,147,6.764880952],
        [124,249,6.764880952],[125,55,1],[126,147,144.576481],[126,91,135.9375],
        [126,53,26.18965517],[126,126,24.720094],[126,127,18.98304384],[126,68,15.46031746],
        [126,124,14.61461525],[126,55,9.259776536],[126,54,5.35483871],[127,54,178.6343623],
        [127,190,171.0526316],[127,59,16.84722222],[127,128,15.16346154],[127,141,7.581730769],
        [127,57,6.940397351],[128,126,114.8372093],[128,124,22.47222222],[128,57,14.76811594],
        [128,52,13.84615385],[128,54,10.72142857],[128,59,6.923076923],[129,59,276.3076923],
        [129,141,173.6993007],[129,53,155.9265734],[129,55,155.9265734],[129,126,138.1538462],
        [129,128,138.1538462],[129,154,138.1538462],[129,54,26.76161616],[129,56,25.80185349],
        [129,97,17.77272727],[129,249,17.77272727],[129,129,8.988888889],[129,74,8.029126214],
        [130,57,160.2142857],[130,142,160.2142857],[130,246,160.2142857],[130,104,20.33333333],
        [130,129,20.33333333],[130,132,20.33333333],[130,141,20.33333333],[130,147,20.33333333],
        [130,130,9.027777778],[130,124,7.880597015],[130,154,7.880597015],[131,75,151.7037037],
        [131,128,151.7037037],[131,249,17.09589041],[131,52,6.525714286],[132,132,268.3085417],
        [132,126,124.5811714],[132,128,111.2704918],[132,141,62.81581786],[132,59,26.62135922],
        [132,53,19.14619883],[132,129,13.31067961],[132,134,13.31067961],[132,142,13.31067961],
        [132,151,13.31067961],[132,74,9.573099415],[132,124,9.573099415],[132,249,9.573099415],
        [132,103,7.806122449],[133,55,186.245614],[133,146,186.245614],[133,141,59.51515152],
        [133,105,15.47651007],[133,56,14.87878788],[133,59,14.87878788],[133,124,14.87878788],
        [133,129,14.87878788],[133,93,9.173913043],[133,127,9.173913043],[133,145,7.738255034],
        [133,249,7.738255034],[134,135,188.9666667],[134,142,27.25736359],[134,46,14.46788991],
        [134,126,14.46788991],[134,134,14.46788991],[134,127,13.20731707],[134,57,12.78947368],
        [134,141,12.78947368],[135,135,313.9205882],[135,107,155.092437],[135,59,31.59139785],
        [135,74,21.0609319],[135,126,14.26618024],[135,55,10.53046595],[135,141,10.53046595],
        [135,127,3.735714286],[135,249,3.735714286],[136,52,165.8235294],[136,93,165.8235294],
        [136,117,165.8235294],[136,128,165.8235294],[136,135,165.8235294],[136,249,165.8235294],
        [136,141,56.65628518],[136,136,12.36141338],[136,74,8.858974359],[136,103,8.858974359],
        [136,124,8.858974359],[136,142,8.858974359],[136,95,7.004878049],[136,54,3.502439024],
        [136,62,3.502439024],[136,69,3.502439024],[137,147,161.7309167],[137,55,137.6315789],
        [137,117,137.6315789],[137,154,137.6315789],[137,141,27.54378219],[137,137,11.47755703],
        [137,58,8.033112583],[137,74,8.033112583],[137,102,8.033112583],[137,129,3.818181818],
        [137,87,3.444444444],[138,55,4.534883721],[138,129,4.534883721],[138,141,4.534883721],
        [138,135,2.555555556],[139,124,175.1212121],[139,74,11.0141844],[139,127,5.791304348],
        [139,139,5.791304348],[139,151,5.791304348],[139,152,5.791304348],[140,141,193.0033282],
        [140,142,176.2474227],[140,57,28.49671053],[140,55,9.8125],[140,104,9.8125],
        [140,140,9.8125],[140,92,8.377952756],[140,130,8.377952756],[140,192,8.377952756],
        [140,124,4.349693252],[140,249,4.349693252],[141,52,19.50026455],[141,147,19.50026455],
        [141,135,15.48412698],[141,142,12.43518519],[141,129,11.02083333],[141,151,7.169444444],
        [141,56,5.161375661],[142,104,152.8300654],[142,124,139.9411765],[142,146,139.9411765],
        [142,142,20.74662947],[142,107,12.88888889],[142,147,12.88888889],[142,52,12.52242901],
        [142,59,5.476839237],[143,154,192.2521307],[143,147,8.0703125],[143,158,8.0703125],
        [143,106,6.293577982],[143,127,3.146788991],[143,143,3.146788991],[144,144,24.22822073],
        [144,154,12.57916413],[144,65,9.396774194],[144,129,9.396774194],[144,146,9.396774194],
        [144,141,6.451620706],[144,77,4.233333333],[144,98,4.233333333],[144,87,3.269230769],
        [144,147,3.269230769],[144,66,3.182389937],[144,94,3.182389937],[144,124,3.182389937],
        [145,152,158.1974522],[145,166,158.1974522],[145,144,18.68521739],[145,145,15.74364483],
        [145,59,13.79373652],[145,154,10.09738632],[145,53,9.342608696],[145,56,9.342608696],
        [145,71,9.342608696],[145,141,9.342608696],[145,151,9.342608696],[145,230,9.342608696],
        [145,107,8.902255639],[145,52,5.646258503],[145,156,5.646258503],[145,54,4.45112782],
        [145,103,4.45112782],[145,124,4.45112782],[145,126,4.45112782],[145,132,4.45112782],
        [145,147,4.45112782],[146,146,195.2896405],[146,127,165.1038986],[146,141,28.48148148],
        [146,82,14.24074074],[146,104,14.24074074],[146,56,8.244131455],[146,145,8.244131455],
        [146,94,7.116197183],[146,52,6.848739496],[146,69,6.848739496],[146,93,6.848739496],
        [146,132,6.848739496],[146,136,6.848739496],[146,154,6.848739496],[146,55,6.287581699],
        [147,147,14.03980568],[147,52,12.59531091],[147,107,7.34375],[147,87,6.706422018],
        [147,109,5.888888889],[147,54,3.348027842],[147,155,3.348027842],[147,142,1.419014085],
        [148,154,200.4327264],[148,146,171.3179724],[148,113,9.704918033],[148,132,9.704918033],
        [148,158,9.704918033],[148,76,5.691056911],[148,77,5.691056911],[148,59,2.845528455],
        [148,148,2.845528455],[149,156,162.6254845],[149,142,161.0208333],[149,154,161.0208333],
        [149,113,6.010810811],[149,71,1.604651163],[149,94,1.604651163],[150,154,263.6088104],
        [150,147,130.4867257],[150,141,14.97910448],[150,230,7.489552239],[150,151,5.270718232],
        [150,69,2.635359116],[150,145,2.635359116],[150,150,2.635359116],[150,152,2.635359116],
        [151,154,769.1320755],[151,146,211.2594005],[151,147,25.65517241],[151,105,18.27659574],
        [151,52,16.26589595],[151,98,15.03205128],[151,55,10.42465753],[151,67,10.42465753],
        [151,59,8.551724138],[151,135,8.551724138],[151,156,8.551724138],[151,249,8.551724138],
        [152,154,150.2640613],[152,152,136.0502846],[152,156,136.0502846],[152,69,128.9433962],
        [152,57,14.21377672],[152,97,7.106888361],[152,141,7.106888361],[152,66,3.211267606],
        [152,113,2.727272727],[152,124,2.727272727],[152,145,2.727272727],[153,154,193.3571429],
        [153,153,101.0502528],[153,146,98.86441214],[153,142,96.67857143],[153,147,96.67857143],
        [153,145,9.498636916],[153,156,7.312796209],[153,58,2.185840708],[153,164,2.185840708],
        [154,113,82.16],[154,154,82.16],[155,117,25.61728395],[155,105,7.641975309],
        [155,113,7.641975309],[155,133,7.641975309],[155,154,7.641975309],[155,71,5.627906977],
        [155,150,3.444444444],[156,156,24],[156,105,12.96153846],[156,57,12],
        [156,109,12],[156,113,12],[156,126,12],[156,128,4.492307692],
        [157,117,231.3377091],[157,154,25.14649682],[157,106,12.57324841],[157,108,12.57324841],
        [157,116,12.57324841],[157,156,12.57324841],[157,157,12.57324841],[157,120,8.87804878],
        [157,92,7.86440678],[158,154,131.7906977],[158,124,5.647482014],[158,104,1.517241379]
        );

        var dicionario = new Map();
        var map = L.map('mapid').setView([-8.0525, -34.921], 13);

        var cartodbAttribution = '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attribution">CARTO</a>';

        var positron = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
            attribution: cartodbAttribution
        }).addTo(map);

        //L.esri.basemapLayer('Imagery').addTo(map);
        //L.esri.basemapLayer('ImageryLabels').addTo(map);
        

        var aimplementar = L.geoJSON(PrevRedeCicloMetropolitana, {
            color: '#ffff00',
            weight: 2,
            opacity: 1,
            dashArray: '12 8 12',
        });

        var aimplementar2 = L.geoJSON(PrevRedeCicloComplementar, {
            color: '#964b00',
            weight: 2,
            opacity: 1,
            dashArray: '12 8 12',
        });

        // Add scalebar, A escala está em metros e em milhas

        var scale = L.control.scale()
        scale.addTo(map);

        var zona = L.geoJSON(zonas, {
            style: style,
            onEachFeature: onEachFeature
        });

        var trail = L.geoJSON(malha, {
            color: '#0f0000',
            weight: 2,
            opacity: 1,
            dashArray: '12 8 12',
        });
        //trail.addTo(map);

        var cic2 = L.geoJSON(ciclo2, {
            color: '#0000ff',
            weight: 2,
            opacity: 1,
            dashArray: '12 8 12',
        });

        function getColor(d) {
            return d > 1000 ? '#800026' :
                d > 500  ? '#BD0026' :
                d > 200  ? '#E31A1C' :
                d > 100  ? '#FC4E2A' :
                d > 50   ? '#FD8D3C' :
                d > 20   ? '#FEB24C' :
                d > 10   ? '#FED976' :
                            '#FFEDA0';
        }

        function style(feature) {
            var codzona = feature.properties.CODIGOZONA;
            //zonaclicada = codzona;
            var deslocs = 0;

            //console.log(ODBike[k][0])
            var i = 0
            for(;i < 791; i++){
                var num  = ODBike[i][0];
                if(num + 50 < codzona){
                    i = i + 50
                }
                if(num > codzona){
                    break;
                }else{
                    if(num == codzona){
                        //console.log('achou');
                        var tradu = ODBike[i][1];
                        if(num != tradu){
                            deslocs = deslocs+ODBike[i][2];
                        }
                    }
                }
            }
            dicionario.set(codzona, deslocs);
            return {
                fillColor: getColor(deslocs),
                weight: 2,
                opacity: 1,
                color: 'white',
                dashArray: '3',
                fillOpacity: 0.7
            };
        }

        function highlightFeature(e) {
            var layer = e.target;
            
            layer.setStyle({
                weight: 5,
                color: '#666',
                dashArray: '',
                fillOpacity: 0.7
            });

            /*if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                layer.bringToFront();
            }*/

            info.update(layer.feature.properties);
        }

        function resetHighlight(e) {
            zona.resetStyle(e.target);
            info.update();
        }

        function zoomToFeature(e) {
            map.fitBounds(e.target.getBounds());
        }

        function onEachFeature(feature, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight,
                click: zoomToFeature
            });
            //console.log(layer);
        }


        zona.addTo(map);
        
        var info = L.control();
        info.onAdd = function (map) {
            this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
            this.update();
            return this._div;
        };

        info.update = function (props) {
            this._div.innerHTML = '<h4>Zonas e deslocamento no recife</h4>' +  (props ?
                '<b>' + 'Zona de número: ' +props.CODIGOZONA + '</b><br />'  
                + 'Quantidade total de deslocamentos:' + dicionario.get(props.CODIGOZONA).toFixed(3).toLocaleString('pt-BR')
                 : 'Selecione uma zona');
        };

        info.addTo(map);
        
        var legend = L.control({position: 'bottomright'});

        legend.onAdd = function (map) {

            var div = L.DomUtil.create('div', 'info legend'),
                grades = [0, 10, 20, 50, 100, 200, 500, 1000],
                labels = [];

            // loop through our density intervals and generate a label with a colored square for each interval
            for (var i = 0; i < grades.length; i++) {
                div.innerHTML +=
                    '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' +
                    grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
            }

            return div;
        };

        legend.addTo(map);

        var baselayers = {
            //'Zonas do Recife': zona,
            //'Faixa Azul - ônibus': faixbus
        };


        var overlays = {
            'Rede Cicloviária': trail,
            'Ciclovias operacionais': cic2,
            'Rotas a implementar - PDC': aimplementar,
            'Rotas a implementar - Complementar': aimplementar2
        };
        L.control.layers(baselayers,overlays).addTo(map);

    </script>
  </body>
</html>
